<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storehub — Inventory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-950 text-slate-200 min-h-screen font-sans">
    <aside class="fixed top-0 left-0 h-full w-64 bg-slate-900 border-r border-slate-800 flex flex-col z-40">
        <div class="px-6 py-6 border-b border-slate-800">
            <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center text-white font-extrabold text-sm shadow-lg shadow-violet-500/20">S</div>
                <div>
                    <h1 class="text-white font-bold text-lg leading-none">Storehub</h1>
                    <p class="text-slate-500 text-xs mt-0.5">Inventory System</p>
                </div>
            </div>
        </div>
        <nav class="flex-1 px-3 py-4 space-y-1">
            <a href="#" class="flex items-center gap-3 px-3 py-2.5 rounded-xl bg-slate-800/70 text-white text-sm font-medium">
                <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"/></svg>
                Products
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-400 hover:bg-slate-800/40 hover:text-slate-200 text-sm transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"/></svg>
                Analytics
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-400 hover:bg-slate-800/40 hover:text-slate-200 text-sm transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/></svg>
                Settings
            </a>
        </nav>
        <div class="px-4 py-4 border-t border-slate-800">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center text-white text-xs font-bold">A</div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium text-white truncate">Admin</p>
                    <p class="text-xs text-slate-500 truncate">admin@storehub.io</p>
                </div>
            </div>
        </div>
    </aside>
    <main class="ml-64">
        <header class="sticky top-0 z-30 bg-slate-950/80 backdrop-blur-lg border-b border-slate-800">
            <div class="flex items-center justify-between px-8 py-4">
                <div>
                    <h2 class="text-white text-xl font-bold">Products</h2>
                    <p class="text-slate-500 text-sm">Manage your product inventory</p>
                </div>
                <button onclick="toggleForm()" id="btn-new"
                    class="bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white font-semibold text-sm px-5 py-2.5 rounded-xl shadow-lg shadow-violet-500/20 transition-all cursor-pointer flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"/></svg>
                    New Product
                </button>
            </div>
        </header>

        <div class="px-8 py-6 space-y-6">
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 flex items-center gap-4">
                    <div class="w-11 h-11 rounded-xl bg-violet-500/10 flex items-center justify-center">
                        <svg class="w-5 h-5 text-violet-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"/></svg>
                    </div>
                    <div>
                        <p class="text-xs text-slate-500 uppercase tracking-wider font-medium">Total Products</p>
                        <p class="text-2xl font-bold text-white" id="stat-total">0</p>
                    </div>
                </div>
                <div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 flex items-center gap-4">
                    <div class="w-11 h-11 rounded-xl bg-emerald-500/10 flex items-center justify-center">
                        <svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"/></svg>
                    </div>
                    <div>
                        <p class="text-xs text-slate-500 uppercase tracking-wider font-medium">Total Stock</p>
                        <p class="text-2xl font-bold text-white" id="stat-stock">0</p>
                    </div>
                </div>
                <div class="bg-slate-900 border border-slate-800 rounded-2xl p-5 flex items-center gap-4">
                    <div class="w-11 h-11 rounded-xl bg-amber-500/10 flex items-center justify-center">
                        <svg class="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/></svg>
                    </div>
                    <div>
                        <p class="text-xs text-slate-500 uppercase tracking-wider font-medium">Inventory Value</p>
                        <p class="text-2xl font-bold text-white" id="stat-value">Rp 0</p>
                    </div>
                </div>
            </div>
            <div id="form-section" class="hidden">
                <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-5">
                        <h3 class="text-white font-semibold text-lg" id="form-title">Add New Product</h3>
                        <button onclick="toggleForm()" class="text-slate-500 hover:text-slate-300 transition cursor-pointer">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg>
                        </button>
                    </div>
                    <form id="product-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="hidden" id="product-id" value="">
                        <div>
                            <label for="product-name" class="block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider">Product Name</label>
                            <input type="text" id="product-name" placeholder="e.g. Laptop" maxlength="100"
                                class="w-full bg-slate-800 border border-slate-700 text-white placeholder-slate-500 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition" required>
                        </div>
                        <div>
                            <label for="product-description" class="block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider">Description</label>
                            <input type="text" id="product-description" placeholder="e.g. High performance laptop" maxlength="255"
                                class="w-full bg-slate-800 border border-slate-700 text-white placeholder-slate-500 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition">
                        </div>
                        <div>
                            <label for="product-price" class="block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider">Price</label>
                            <input type="number" id="product-price" placeholder="1200.00" min="0" step="0.01"
                                class="w-full bg-slate-800 border border-slate-700 text-white placeholder-slate-500 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition" required>
                        </div>
                        <div>
                            <label for="product-stock" class="block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider">Stock Quantity</label>
                            <input type="number" id="product-stock" placeholder="25" min="0"
                                class="w-full bg-slate-800 border border-slate-700 text-white placeholder-slate-500 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition">
                        </div>
                        <div class="md:col-span-2 flex gap-3 mt-1">
                            <button type="submit" id="btn-submit"
                                class="bg-gradient-to-r from-violet-600 to-fuchsia-600 hover:from-violet-500 hover:to-fuchsia-500 text-white font-semibold text-sm px-6 py-2.5 rounded-xl shadow-lg shadow-violet-500/20 transition-all cursor-pointer">
                                + Add Product
                            </button>
                            <button type="button" id="btn-cancel" onclick="cancelEdit()"
                                class="hidden bg-slate-800 hover:bg-slate-700 text-slate-300 font-medium text-sm px-6 py-2.5 rounded-xl transition cursor-pointer border border-slate-700">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                <div class="flex items-center justify-between px-6 py-4 border-b border-slate-800">
                    <div class="relative">
                        <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/></svg>
                        <input type="text" id="search-input" placeholder="Search products..."
                            class="bg-slate-800 border border-slate-700 text-white placeholder-slate-500 rounded-xl pl-10 pr-4 py-2 text-sm w-72 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:border-transparent transition"
                            oninput="renderTable()">
                    </div>
                    <p class="text-slate-500 text-sm"><span id="showing-count">0</span> products</p>
                </div>

                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b border-slate-800">
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">Product</th>
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">Description</th>
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">Price</th>
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">Stock Qty</th>
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider">Created</th>
                            <th class="px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="product-table">
                    </tbody>
                </table>
                <div id="empty-state" class="hidden py-20 text-center">
                    <div class="w-16 h-16 rounded-2xl bg-slate-800 flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-slate-600" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"/></svg>
                    </div>
                    <p class="text-slate-400 font-medium">No products yet</p>
                    <p class="text-slate-600 text-sm mt-1">Click "New Product" to get started</p>
                </div>
            </div>
        </div>
    </main>
    <div id="delete-modal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-sm mx-4">
            <div class="w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4">
                <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"/></svg>
            </div>
            <h3 class="text-white font-semibold text-lg text-center">Delete this product?</h3>
            <p class="text-slate-400 text-sm text-center mt-2 mb-6">This can't be undone. The product will be permanently removed.</p>
            <div class="flex gap-3">
                <button onclick="closeDeleteModal()"
                    class="flex-1 px-4 py-2.5 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-300 font-medium text-sm transition cursor-pointer border border-slate-700">Cancel</button>
                <button id="btn-confirm-delete"
                    class="flex-1 px-4 py-2.5 rounded-xl bg-red-600 hover:bg-red-500 text-white font-medium text-sm transition cursor-pointer shadow-lg shadow-red-500/20">Delete</button>
            </div>
        </div>
    </div>

    <script>
        let products = [];
        let nextId = 1;
        let deleteTargetId = null;
        const form = document.getElementById('product-form');
        const tableBody = document.getElementById('product-table');
        const emptyState = document.getElementById('empty-state');
        const formSection = document.getElementById('form-section');
        const formTitle = document.getElementById('form-title');
        const btnSubmit = document.getElementById('btn-submit');
        const btnCancel = document.getElementById('btn-cancel');
        const searchInput = document.getElementById('search-input');
        function toggleForm() {
            formSection.classList.toggle('hidden');
            if (formSection.classList.contains('hidden')) cancelEdit();
        }
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value.trim();
            const description = document.getElementById('product-description').value.trim();
            const price = parseFloat(document.getElementById('product-price').value);
            const stock_quantity = parseInt(document.getElementById('product-stock').value) || 0;

            if (id) {
                const product = products.find(p => p.product_id === parseInt(id));
                if (product) {
                    product.name = name;
                    product.description = description;
                    product.price = price;
                    product.stock_quantity = stock_quantity;
                }
                cancelEdit();
            } else {
                products.push({
                    product_id: nextId++,
                    name,
                    description,
                    price,
                    stock_quantity,
                    created_at: new Date().toISOString()
                });
            }

            form.reset();
            document.getElementById('product-id').value = '';
            renderTable();
        });
        function editProduct(id) {
            const p = products.find(p => p.product_id === id);
            if (!p) return;

            formSection.classList.remove('hidden');
            document.getElementById('product-id').value = p.product_id;
            document.getElementById('product-name').value = p.name;
            document.getElementById('product-description').value = p.description || '';
            document.getElementById('product-price').value = p.price;
            document.getElementById('product-stock').value = p.stock_quantity;

            formTitle.textContent = 'Edit Product';
            btnSubmit.textContent = 'Save Changes';
            btnSubmit.classList.remove('from-violet-600', 'to-fuchsia-600', 'hover:from-violet-500', 'hover:to-fuchsia-500', 'shadow-violet-500/20');
            btnSubmit.classList.add('from-amber-500', 'to-orange-500', 'hover:from-amber-400', 'hover:to-orange-400', 'shadow-amber-500/20');
            btnCancel.classList.remove('hidden');

            formSection.scrollIntoView({ behavior: 'smooth' });
        }

        function cancelEdit() {
            form.reset();
            document.getElementById('product-id').value = '';
            formTitle.textContent = 'Add New Product';
            btnSubmit.textContent = '+ Add Product';
            btnSubmit.classList.add('from-violet-600', 'to-fuchsia-600', 'hover:from-violet-500', 'hover:to-fuchsia-500', 'shadow-violet-500/20');
            btnSubmit.classList.remove('from-amber-500', 'to-orange-500', 'hover:from-amber-400', 'hover:to-orange-400', 'shadow-amber-500/20');
            btnCancel.classList.add('hidden');
        }
        function openDeleteModal(id) {
            deleteTargetId = id;
            document.getElementById('delete-modal').classList.remove('hidden');
        }

        function closeDeleteModal() {
            deleteTargetId = null;
            document.getElementById('delete-modal').classList.add('hidden');
        }

        document.getElementById('btn-confirm-delete').addEventListener('click', () => {
            if (deleteTargetId !== null) {
                products = products.filter(p => p.product_id !== deleteTargetId);
                closeDeleteModal();
                renderTable();
            }
        });
        function formatDate(iso) {
            const d = new Date(iso);
            return d.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' });
        }

        function formatPrice(n) {
            return parseFloat(n).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }
        function renderTable() {
            const query = searchInput.value.toLowerCase();
            const filtered = products.filter(p =>
                p.name.toLowerCase().includes(query) ||
                (p.description || '').toLowerCase().includes(query) ||
                p.price.toString().includes(query)
            );

            document.getElementById('showing-count').textContent = filtered.length;

            if (filtered.length === 0) {
                tableBody.innerHTML = '';
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                tableBody.innerHTML = filtered.map(p => {
                    const stockColor = p.stock_quantity > 10
                        ? 'bg-emerald-500/10 text-emerald-400'
                        : p.stock_quantity > 0
                            ? 'bg-amber-500/10 text-amber-400'
                            : 'bg-red-500/10 text-red-400';

                    return `
                    <tr class="border-b border-slate-800/50 hover:bg-slate-800/30 transition">
                        <td class="px-6 py-4">
                            <div class="flex items-center gap-3">
                                <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20 flex items-center justify-center text-violet-300 text-xs font-bold">${esc(p.name).charAt(0).toUpperCase()}</div>
                                <span class="text-sm font-medium text-white">${esc(p.name)}</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-sm text-slate-400 max-w-[200px] truncate">${esc(p.description || '—')}</td>
                        <td class="px-6 py-4 text-sm text-slate-300 font-mono">$${formatPrice(p.price)}</td>
                        <td class="px-6 py-4">
                            <span class="inline-block px-2.5 py-1 rounded-lg text-xs font-medium ${stockColor}">
                                ${p.stock_quantity}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-sm text-slate-500">${formatDate(p.created_at)}</td>
                        <td class="px-6 py-4 text-right">
                            <button onclick="editProduct(${p.product_id})" class="inline-flex items-center gap-1 text-slate-400 hover:text-violet-400 text-sm mr-2 transition cursor-pointer">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"/></svg>
                                Edit
                            </button>
                            <button onclick="openDeleteModal(${p.product_id})" class="inline-flex items-center gap-1 text-slate-400 hover:text-red-400 text-sm transition cursor-pointer">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"/></svg>
                                Delete
                            </button>
                        </td>
                    </tr>`;
                }).join('');
            }
            document.getElementById('stat-total').textContent = products.length;
            const totalStock = products.reduce((s, p) => s + p.stock_quantity, 0);
            document.getElementById('stat-stock').textContent = totalStock.toLocaleString('en-US');
            const totalValue = products.reduce((s, p) => s + (p.price * p.stock_quantity), 0);
            document.getElementById('stat-value').textContent = '$' + formatPrice(totalValue);
        }

        function esc(str) {
            const d = document.createElement('div');
            d.textContent = str;
            return d.innerHTML;
        }

        renderTable();
    </script>
</body>
</html>